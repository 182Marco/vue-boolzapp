<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- font awesome cdn -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
      integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
      crossorigin="anonymous"
    />
    <!-- VUE -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <!-- css -->
    <link rel="stylesheet" href="css/style.css" />
    <!-- favicon -->
    <link rel="icon" href="img/favicon.png" />
    <title>Boolzapp</title>
  </head>
  <body>
    <div id="app" :class="{dark : darkmode}">
      <!-- parte app escluso lo sfondo -->
      <main :class="{dark : darkmode}">
        <!-- ASIDE -->
        <!-- macroarea sx -->
        <aside :class="{dark : darkmode}">
          <!-- intestazione -->
          <header class="sx" :class="{dark : darkmode}">
            <!-- account dell'utente -->
            <a href="#" class="account-box">
              <img src="img/avatar_io.jpg" alt="person" />
              <span :class="{dark : darkmode}">Nome Utente</span>
            </a>
            <!-- wrap opzioni su header sx -->
            <div class="wrap-options">
              <i class="fas fa-circle-notch"></i>
              <i class="fas fa-comment-alt"></i>
              <i class="fas fa-ellipsis-v"></i>
            </div>
          </header>
          <!-- reattangolo vuoi ricevere notifiche -->
          <div class="active-note-box" :class="{dark : darkmode}">
            <i class="fas fa-bell-slash" :class="{dark : darkmode}"></i>
            <div class="wrap">
              <p>Ricevi le notifiche di nuovi messaggi</p>
              <a href="#" :class="{dark : darkmode}"
                >Attiva notifiche desktop</a
              >
            </div>
          </div>
          <!-- ricerca chat -->
          <div class="search-contact-box" :class="{dark : darkmode}">
            <i class="fas fa-search"></i>
            <input
              type="text"
              placeholder="Cerca o inizia una nova chat"
              :class="{dark : darkmode}"
              v-model="searchUser"
            />
          </div>
          <!-- comincia lista delle chat -->
          <ul :class="{dark : darkmode}">
            <li
              v-for="(user, i ) in users"
              :key="`i-${user.avatar}`"
              :class="{dark : darkmode}"
              @click="idChat = i"
              v-show="users[i].name.toLowerCase().includes(searchUser.toLowerCase())"
            >
              <a href="#" class="account-box">
                <img :src="`img/avatar${user.avatar}.jpg`" :alt="user.name" />
                <span :class="{dark : darkmode}">{{user.name}}</span>
              </a>
            </li>
          </ul>
        </aside>
        <!-- ************ -->
        <!-- macroarea dx -->
        <section>
          <!-- intestazione -->
          <header class="dx" :class="{dark : darkmode}">
            <a
              v-for="(user, i) in users"
              :key="`i-${user.avatar}`"
              v-show="users[i] == users[idChat]"
              href="#"
              class="account-box"
            >
              <img :src="`img/avatar${user.avatar}.jpg`" :alt="user.name" />
              <div class="wrap">
                <span :class="{dark : darkmode}">{{user.name}}</span>
                <span>{{user.messages[user.messages.length -1].date}}</span>
              </div>
            </a>
            <!-- wrap delle opzioni su header dx -->
            <div class="wrap-options">
              <i class="fas fa-adjust" @click="darkmode = !darkmode"></i>
              <i class="fas fa-search"></i>
              <i class="fas fa-paperclip"></i>
              <i class="fas fa-ellipsis-v"></i>
            </div>
          </header>
          <!-- area sended message -->
          <div
            v-for="(user, i ) in users"
            :key="`i-${user.avatar}`"
            class="sended-area"
            :class="{dark : darkmode}"
            v-show="users[i] == users[idChat]"
          >
            <ul v-for="message in users[i].messages">
              <!-- contenitore in uscita -->
              <li
                class="mes"
                :class="{
                  sent : message.status == 'sent',
                  dark : darkmode
                }"
              >
                {{message.message}}
                <div class="date" :class="{dark : darkmode}">
                  {{message.date}}
                </div>
              </li>
            </ul>
          </div>
          <!-- area per invio (footer) -->
          <footer :class="{dark : darkmode}">
            <i class="far fa-smile"></i>
            <input
              type="text"
              :class="{dark : darkmode}"
              placeholder="Scrivi un messaggio"
              @keyup.enter="writeMsg"
              v-model="newMsg"
              ref="inputMsg"
            />
            <i v-show=" newMsg == ''" class="fas fa-microphone"></i>
            <i
              v-show=" newMsg != ''"
              @click="writeMsg"
              class="fab fa-telegram-plane"
            ></i>
          </footer>
        </section>
      </main>
    </div>
    <!-- main js -->
    <script src="main.js" charset="utf-8"></script>
  </body>
</html>
